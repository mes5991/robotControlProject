%% Controller Testbed

%%
clear
close all
%%
%Get path
pathChoice = 1;

switch pathChoice
    case 1
        [x, y, phi] = getCirclePath(30, [30 30]);
    case 2
        [x, y, phi] = getSinPath(80,20,.05);
end
path = [x;y;phi]';      
        


L = 4.5; %m, car length
%PD gain values
% kp = 1.5;
% kv = .001;
% ki = 0;

% PID gain values
% kp = 4;
% kv = .005;
% ki = 0.01;

kp = 50;
kv = 10;
ki = 1;

x0 = -5;
y0 = -5;
theta0 = 0;

sim PID_FUQROS

figure(1)
plot(chosenPath(:,1),chosenPath(:,2),'--r')
hold on
plot(desiredPath(:,1),desiredPath(:,2),'--')
plot(actualPath(:,1),actualPath(:,2),'g')
axis equal
legend('Chose Path','Desired Path','Actual Path')
title('Position')
grid on
hold off

figure(2)
plot(theta.time,theta.signals.values)
title('theta over time')
grid on

figure(3)
plot(phi.time,phi.signals.values)
title('phi over time')
grid on
